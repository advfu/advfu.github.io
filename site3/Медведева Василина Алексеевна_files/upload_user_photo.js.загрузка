!function(){var n={99:function(oe,e,t){var n;void 0!==(t="function"==typeof(n=function(){if(typeof Promise!=="function")!function(e){function n(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,n(i,this),n(r,this))}function a(n){var i=this;return null===this._state?void this._deferreds.push(n):void c(function(){var e=i._state?n.onFulfilled:n.onRejected;if(null===e)return void(i._state?n.resolve:n.reject)(i._value);var t;try{t=e(i._value)}catch(e){return void n.reject(e)}n.resolve(t)})}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var t=e.then;if("function"===typeof t)return void u(n(t,e),n(i,this),n(r,this))}this._state=!0,this._value=e,s.call(this)}catch(e){r.call(this,e)}}function r(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;t>e;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n,i){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=i}function u(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(e){if(i)return;i=!0,n(e)}}var t=setTimeout,c="function"===typeof setImmediate&&setImmediate||function(e){t(e,1)},p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(n,i){var r=this;return new o(function(e,t){a.call(r,new l(n,i,e,t))})},o.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&p(arguments[0])?arguments[0]:arguments);return new o(function(i,r){function o(t,e){try{if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if("function"===typeof n)return void n.call(e,function(e){o(t,e)},r)}s[t]=e,0===--a&&i(s)}catch(e){r(e)}}if(0===s.length)return i([]);for(var a=s.length,e=0;e<s.length;e++)o(e,s[e])})},o.resolve=function(t){return t&&"object"===typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(r){return new o(function(e,t){for(var n=0,i=r.length;i>n;n++)r[n].then(e,t)})},o._setImmediateFn=function(e){c=e},true&&oe.exports?oe.exports=o:e.Promise||(e.Promise=o)}(this);if(typeof window!=="undefined"&&typeof window.CustomEvent!=="function")(function(){function e(e,t){t=t||{bubbles:false,cancelable:false,detail:undefined};var n=document.createEvent("CustomEvent");n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n}e.prototype=window.Event.prototype;window.CustomEvent=e})();if(typeof HTMLCanvasElement!=="undefined"&&!HTMLCanvasElement.prototype.toBlob)Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=atob(this.toDataURL(t,n).split(",")[1]),r=i.length,o=new Uint8Array(r);for(var a=0;a<r;a++)o[a]=i.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}});var i=["Webkit","Moz","ms"],r=typeof document!=="undefined"?document.createElement("div").style:{},o=[1,8,3,6],a=[2,7,4,5],v,g,w;function e(e){if(e in r)return e;var t=e[0].toUpperCase()+e.slice(1),n=i.length;while(n--){e=i[n]+t;if(e in r)return e}}function s(e,t){var n=o.indexOf(e)>-1?o:a,i=n.indexOf(e),r=t/90%n.length;return n[(n.length+i+r%n.length)%n.length]}function h(e,t){e=e||{};for(var n in t)if(t[n]&&t[n].constructor&&t[n].constructor===Object){e[n]=e[n]||{};h(e[n],t[n])}else e[n]=t[n];return e}function f(e){return h({},e)}function t(r,o,a){var s;return function(){var e=this,t=arguments;var n=function(){s=null;if(!a)r.apply(e,t)};var i=a&&!s;clearTimeout(s);s=setTimeout(n,o);if(i)r.apply(e,t)}}function b(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",false,true);e.dispatchEvent(t)}else e.fireEvent("onchange")}function y(e,t,n){if(typeof t==="string"){var i=t;t={};t[i]=n}for(var r in t)e.style[r]=t[r]}function x(e,t){if(e.classList)e.classList.add(t);else e.className+=" "+t}function n(e,t){if(e.classList)e.classList.remove(t);else e.className=e.className.replace(t,"")}function u(e,t){for(var n in t)e.setAttribute(n,t[n])}function C(e){return parseInt(e,10)}function R(i,r){if(!i)throw"Source image missing";var o=new Image;o.style.opacity="0";return new Promise(function(e,t){function n(){o.style.opacity="1";setTimeout(function(){e(o)},1)}o.removeAttribute("crossOrigin");if(i.match(/^https?:\/\/|^\/\//))o.setAttribute("crossOrigin","anonymous");o.onload=function(){if(r)EXIF.getData(o,function(){n()});else n()};o.onerror=function(e){o.style.opacity=1;setTimeout(function(){t(e)},1)};o.src=i})}function m(e,t){var n=e.naturalWidth;var i=e.naturalHeight;var r=t||l(e);if(r&&r>=5){var o=n;n=i;i=o}return{width:n,height:i}}var g=e("transform"),v=e("transformOrigin"),w=e("userSelect"),F={translate3d:{suffix:", 0px"},translate:{suffix:""}},S=function(e,t,n){this.x=parseFloat(e);this.y=parseFloat(t);this.scale=parseFloat(n)},E=(S.parse=function(e){if(e.style)return S.parse(e.style[g]);else if(e.indexOf("matrix")>-1||e.indexOf("none")>-1)return S.fromMatrix(e);else return S.fromString(e)},S.fromMatrix=function(e){var t=e.substring(7).split(",");if(!t.length||e==="none")t=[1,0,0,1,0,0];return new S(C(t[4]),C(t[5]),parseFloat(t[0]))},S.fromString=function(e){var t=e.split(") "),n=t[0].substring(D.globals.translate.length+1).split(","),i=t.length>1?t[1].substring(6):1,r=n.length>1?n[0]:0,o=n.length>1?n[1]:0;return new S(r,o,i)},S.prototype.toString=function(){var e=F[D.globals.translate].suffix||"";return D.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"},function(e){if(!e||!e.style[v]){this.x=0;this.y=0;return}var t=e.style[v].split(" ");this.x=parseFloat(t[0]);this.y=parseFloat(t[1])});function l(e){return e.exifdata&&e.exifdata.Orientation?C(e.exifdata.Orientation):1}function c(e,t,n){var i=t.width,r=t.height,o=e.getContext("2d");e.width=t.width;e.height=t.height;o.save();switch(n){case 2:o.translate(i,0);o.scale(-1,1);break;case 3:o.translate(i,r);o.rotate(180*Math.PI/180);break;case 4:o.translate(0,r);o.scale(1,-1);break;case 5:e.width=r;e.height=i;o.rotate(90*Math.PI/180);o.scale(1,-1);break;case 6:e.width=r;e.height=i;o.rotate(90*Math.PI/180);o.translate(0,-r);break;case 7:e.width=r;e.height=i;o.rotate(-90*Math.PI/180);o.translate(-i,r);o.scale(1,-1);break;case 8:e.width=r;e.height=i;o.translate(0,i);o.rotate(-90*Math.PI/180);break}o.drawImage(t,0,0,i,r);o.restore()}function j(){var e=this,t="croppie-container",n=e.options.viewport.type?"cr-vp-"+e.options.viewport.type:null,i,r,o,a,s,l;e.options.useCanvas=e.options.enableOrientation||N.call(e);e.data={};e.elements={};i=e.elements.boundary=document.createElement("div");o=e.elements.viewport=document.createElement("div");r=e.elements.img=document.createElement("img");a=e.elements.overlay=document.createElement("div");if(e.options.useCanvas){e.elements.canvas=document.createElement("canvas");e.elements.preview=e.elements.canvas}else e.elements.preview=r;x(i,"cr-boundary");i.setAttribute("aria-dropeffect","none");s=e.options.boundary.width;l=e.options.boundary.height;y(i,{width:s+(isNaN(s)?"":"px"),height:l+(isNaN(l)?"":"px")});x(o,"cr-viewport");if(n)x(o,n);y(o,{width:e.options.viewport.width+"px",height:e.options.viewport.height+"px"});o.setAttribute("tabindex",0);x(e.elements.preview,"cr-image");u(e.elements.preview,{alt:"preview","aria-grabbed":"false"});x(a,"cr-overlay");e.element.appendChild(i);i.appendChild(e.elements.preview);i.appendChild(o);i.appendChild(a);x(e.element,t);if(e.options.customClass)x(e.element,e.options.customClass);I.call(this);if(e.options.enableZoom)T.call(e);if(e.options.enableResize)H.call(e)}function N(){return this.options.enableExif&&window.EXIF}function H(){var l=this;var u=document.createElement("div");var i=false;var c;var p;var d;var h=50;var f;var m;var e;var t;x(u,"cr-resizer");y(u,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});if(this.options.resizeControls.height){e=document.createElement("div");x(e,"cr-resizer-vertical");u.appendChild(e)}if(this.options.resizeControls.width){t=document.createElement("div");x(t,"cr-resizer-horisontal");u.appendChild(t)}function n(e){if(e.button!==undefined&&e.button!==0)return;e.preventDefault();if(i)return;var t=l.elements.overlay.getBoundingClientRect();i=true;p=e.pageX;d=e.pageY;c=e.currentTarget.className.indexOf("vertical")!==-1?"v":"h";f=t.width;m=t.height;if(e.touches){var n=e.touches[0];p=n.pageX;d=n.pageY}window.addEventListener("mousemove",r);window.addEventListener("touchmove",r);window.addEventListener("mouseup",o);window.addEventListener("touchend",o);document.body.style[w]="none"}function r(e){var t=e.pageX;var n=e.pageY;e.preventDefault();if(e.touches){var i=e.touches[0];t=i.pageX;n=i.pageY}var r=t-p;var o=n-d;var a=l.options.viewport.height+o;var s=l.options.viewport.width+r;if(c==="v"&&a>=h&&a<=m){y(u,{height:a+"px"});l.options.boundary.height+=o;y(l.elements.boundary,{height:l.options.boundary.height+"px"});l.options.viewport.height+=o;y(l.elements.viewport,{height:l.options.viewport.height+"px"})}else if(c==="h"&&s>=h&&s<=f){y(u,{width:s+"px"});l.options.boundary.width+=r;y(l.elements.boundary,{width:l.options.boundary.width+"px"});l.options.viewport.width+=r;y(l.elements.viewport,{width:l.options.viewport.width+"px"})}A.call(l);M.call(l);P.call(l);L.call(l);d=n;p=t}function o(){i=false;window.removeEventListener("mousemove",r);window.removeEventListener("touchmove",r);window.removeEventListener("mouseup",o);window.removeEventListener("touchend",o);document.body.style[w]=""}if(e){e.addEventListener("mousedown",n);e.addEventListener("touchstart",n)}if(t){t.addEventListener("mousedown",n);t.addEventListener("touchstart",n)}this.elements.boundary.appendChild(u)}function k(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=U(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),n)).toString()}}function T(){var i=this,e=i.elements.zoomerWrap=document.createElement("div"),t=i.elements.zoomer=document.createElement("input");x(e,"cr-slider-wrap");x(t,"cr-slider");t.type="range";t.step="0.0001";t.value="1";t.style.display=i.options.showZoomer?"":"none";t.setAttribute("aria-label","zoom");i.element.appendChild(e);e.appendChild(t);i._currentZoom=1;function r(){$.call(i,{value:parseFloat(t.value),origin:new E(i.elements.preview),viewportRect:i.elements.viewport.getBoundingClientRect(),transform:S.parse(i.elements.preview)})}function n(e){var t,n;if(i.options.mouseWheelZoom==="ctrl"&&e.ctrlKey!==true)return 0;else if(e.wheelDelta)t=e.wheelDelta/1200;else if(e.deltaY)t=e.deltaY/1060;else if(e.detail)t=e.detail/-60;else t=0;n=i._currentZoom+t*i._currentZoom;e.preventDefault();k.call(i,n);r.call(i)}i.elements.zoomer.addEventListener("input",r);i.elements.zoomer.addEventListener("change",r);if(i.options.mouseWheelZoom){i.elements.boundary.addEventListener("mousewheel",n);i.elements.boundary.addEventListener("DOMMouseScroll",n)}}function $(e){var t=this,n=e?e.transform:S.parse(t.elements.preview),i=e?e.viewportRect:t.elements.viewport.getBoundingClientRect(),r=e?e.origin:new E(t.elements.preview);function o(){var e={};e[g]=n.toString();e[v]=r.toString();y(t.elements.preview,e)}t._currentZoom=e?e.value:t._currentZoom;n.scale=t._currentZoom;t.elements.zoomer.setAttribute("aria-valuenow",t._currentZoom);o();if(t.options.enforceBoundary){var a=B.call(t,i),s=a.translate,l=a.origin;if(n.x>=s.maxX){r.x=l.minX;n.x=s.maxX}if(n.x<=s.minX){r.x=l.maxX;n.x=s.minX}if(n.y>=s.maxY){r.y=l.minY;n.y=s.maxY}if(n.y<=s.minY){r.y=l.maxY;n.y=s.minY}}o();Z.call(t);L.call(t)}function B(e){var t=this,n=t._currentZoom,i=e.width,r=e.height,o=t.elements.boundary.clientWidth/2,a=t.elements.boundary.clientHeight/2,s=t.elements.preview.getBoundingClientRect(),l=s.width,u=s.height,c=i/2,p=r/2;var d=(c/n-o)*-1;var h=d-(l*(1/n)-i*(1/n));var f=(p/n-a)*-1;var m=f-(u*(1/n)-r*(1/n));var v=1/n*c;var g=l*(1/n)-v;var w=1/n*p;var b=u*(1/n)-w;return{translate:{maxX:d,minX:h,maxY:f,minY:m},origin:{maxX:g,minX:v,maxY:b,minY:w}}}function P(e){var t=this,n=t._currentZoom,i=t.elements.preview.getBoundingClientRect(),r=t.elements.viewport.getBoundingClientRect(),o=S.parse(t.elements.preview.style[g]),a=new E(t.elements.preview),s=r.top-i.top+r.height/2,l=r.left-i.left+r.width/2,u={},c={};if(e){var p=a.x;var d=a.y;var h=o.x;var f=o.y;u.y=p;u.x=d;o.y=h;o.x=f}else{u.y=s/n;u.x=l/n;c.y=(u.y-a.y)*(1-n);c.x=(u.x-a.x)*(1-n);o.x-=c.x;o.y-=c.y}var m={};m[v]=u.x+"px "+u.y+"px";m[g]=o.toString();y(t.elements.preview,m)}function I(){var p=this,n=false,d,h,f,l,m;function v(e,t){var n=p.elements.preview.getBoundingClientRect(),i=m.y+t,r=m.x+e;if(p.options.enforceBoundary){if(l.top>n.top+t&&l.bottom<n.bottom+t)m.y=i;if(l.left>n.left+e&&l.right<n.right+e)m.x=r}else{m.y=i;m.x=r}}function i(e){p.elements.preview.setAttribute("aria-grabbed",e);p.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function e(e){var t=37,n=38,i=39,r=40;if(e.shiftKey&&(e.keyCode===n||e.keyCode===r)){var o;if(e.keyCode===n)o=parseFloat(p.elements.zoomer.value)+parseFloat(p.elements.zoomer.step);else o=parseFloat(p.elements.zoomer.value)-parseFloat(p.elements.zoomer.step);p.setZoom(o)}else if(p.options.enableKeyMovement&&(e.keyCode>=37&&e.keyCode<=40)){e.preventDefault();var a=s(e.keyCode);m=S.parse(p.elements.preview);document.body.style[w]="none";l=p.elements.viewport.getBoundingClientRect();u(a)}function s(e){switch(e){case t:return[1,0];case n:return[0,1];case i:return[-1,0];case r:return[0,-1]}}}function u(e){var t=e[0],n=e[1],i={};v(t,n);i[g]=m.toString();y(p.elements.preview,i);A.call(p);document.body.style[w]="";P.call(p);L.call(p);f=0}function t(e){if(e.button!==undefined&&e.button!==0)return;e.preventDefault();if(n)return;n=true;d=e.pageX;h=e.pageY;if(e.touches){var t=e.touches[0];d=t.pageX;h=t.pageY}i(n);m=S.parse(p.elements.preview);window.addEventListener("mousemove",r);window.addEventListener("touchmove",r);window.addEventListener("mouseup",o);window.addEventListener("touchend",o);document.body.style[w]="none";l=p.elements.viewport.getBoundingClientRect()}function r(e){e.preventDefault();var t=e.pageX,n=e.pageY;if(e.touches){var i=e.touches[0];t=i.pageX;n=i.pageY}var r=t-d,o=n-h,a={};if(e.type==="touchmove")if(e.touches.length>1){var s=e.touches[0];var l=e.touches[1];var u=Math.sqrt((s.pageX-l.pageX)*(s.pageX-l.pageX)+(s.pageY-l.pageY)*(s.pageY-l.pageY));if(!f)f=u/p._currentZoom;var c=u/f;k.call(p,c);b(p.elements.zoomer);return}v(r,o);a[g]=m.toString();y(p.elements.preview,a);A.call(p);h=n;d=t}function o(){n=false;i(n);window.removeEventListener("mousemove",r);window.removeEventListener("touchmove",r);window.removeEventListener("mouseup",o);window.removeEventListener("touchend",o);document.body.style[w]="";P.call(p);L.call(p);f=0}p.elements.overlay.addEventListener("mousedown",t);p.elements.viewport.addEventListener("keydown",e);p.elements.overlay.addEventListener("touchstart",t)}function A(){if(!this.elements)return;var e=this,t=e.elements.boundary.getBoundingClientRect(),n=e.elements.preview.getBoundingClientRect();y(e.elements.overlay,{width:n.width+"px",height:n.height+"px",top:n.top-t.top+"px",left:n.left-t.left+"px"})}E.prototype.toString=function(){return this.x+"px "+this.y+"px"};var Z=t(A,500);function L(){var e=this,t=e.get();if(!p.call(e))return;e.options.update.call(e,t);if(e.$&&typeof Prototype==="undefined")e.$(e.element).trigger("update.croppie",t);else{var n;if(window.CustomEvent)n=new CustomEvent("update",{detail:t});else{n=document.createEvent("CustomEvent");n.initCustomEvent("update",true,true,t)}e.element.dispatchEvent(n)}}function p(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function _(){var e=this,t=1,n={},i=e.elements.preview,r,o=new S(0,0,t),a=new E,s=p.call(e);if(!s||e.data.bound)return;e.data.bound=true;n[g]=o.toString();n[v]=a.toString();n["opacity"]=1;y(i,n);r=e.elements.preview.getBoundingClientRect();e._originalImageWidth=r.width;e._originalImageHeight=r.height;e.data.orientation=N.call(e)?l(e.elements.img):e.data.orientation;if(e.options.enableZoom)M.call(e,true);else e._currentZoom=t;o.scale=e._currentZoom;n[g]=o.toString();y(i,n);if(e.data.points.length)X.call(e,e.data.points);else Y.call(e);P.call(e);A.call(e)}function M(e){var t=this,n=Math.max(t.options.minZoom,0)||0,i=t.options.maxZoom||1.5,r,o,a=t.elements.zoomer,s=parseFloat(a.value),l=t.elements.boundary.getBoundingClientRect(),u=m(t.elements.img,t.data.orientation),c=t.elements.viewport.getBoundingClientRect(),p,d;if(t.options.enforceBoundary){p=c.width/u.width;d=c.height/u.height;n=Math.max(p,d)}if(n>=i)i=n+1;a.min=U(n,4);a.max=U(i,4);if(!e&&(s<a.min||s>a.max))k.call(t,s<a.min?a.min:a.max);else if(e){o=Math.max(l.width/u.width,l.height/u.height);r=t.data.boundZoom!==null?t.data.boundZoom:o;k.call(t,r)}b(a)}function X(e){if(e.length!==4)throw"Croppie - Invalid number of points supplied: "+e;var t=this,n=e[2]-e[0],i=t.elements.viewport.getBoundingClientRect(),r=t.elements.boundary.getBoundingClientRect(),o={left:i.left-r.left,top:i.top-r.top},a=i.width/n,s=e[1],l=e[0],u=-1*e[1]+o.top,c=-1*e[0]+o.left,p={};p[v]=l+"px "+s+"px";p[g]=new S(c,u,a).toString();y(t.elements.preview,p);k.call(t,a);t._currentZoom=a}function Y(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),i=e.elements.boundary.getBoundingClientRect(),r=n.left-i.left,o=n.top-i.top,a=r-(t.width-n.width)/2,s=o-(t.height-n.height)/2,l=new S(a,s,e._currentZoom);y(e.elements.preview,g,l.toString())}function W(e){var t=this,n=t.elements.canvas,i=t.elements.img,r=n.getContext("2d");r.clearRect(0,0,n.width,n.height);n.width=i.width;n.height=i.height;var o=t.options.enableOrientation&&e||l(i);c(n,i,o)}function V(e){var t=this,n=e.points,i=C(n[0]),r=C(n[1]),o=C(n[2]),a=C(n[3]),s=o-i,l=a-r,u=e.circle,c=document.createElement("canvas"),p=c.getContext("2d"),d=0,h=0,f=e.outputWidth||s,m=e.outputHeight||l;c.width=f;c.height=m;if(e.backgroundColor){p.fillStyle=e.backgroundColor;p.fillRect(0,0,f,m)}var v=i,g=r,w=s,b=l,y=0,x=0,S=f,E=m;if(i<0){v=0;y=Math.abs(i)/s*f}if(w+v>t._originalImageWidth){w=t._originalImageWidth-v;S=w/s*f}if(r<0){g=0;x=Math.abs(r)/l*m}if(b+g>t._originalImageHeight){b=t._originalImageHeight-g;E=b/l*m}p.drawImage(this.elements.preview,v,g,w,b,y,x,S,E);if(u){p.fillStyle="#fff";p.globalCompositeOperation="destination-in";p.beginPath();p.arc(c.width/2,c.height/2,c.width/2,0,Math.PI*2,true);p.closePath();p.fill()}return c}function q(e){var t=e.points,n=document.createElement("div"),i=document.createElement("img"),r=t[2]-t[0],o=t[3]-t[1];x(n,"croppie-result");n.appendChild(i);y(i,{left:-1*t[0]+"px",top:-1*t[1]+"px"});i.src=e.url;y(n,{width:r+"px",height:o+"px"});return n}function K(e){return V.call(this,e).toDataURL(e.format,e.quality)}function Q(e){var n=this;return new Promise(function(t){V.call(n,e).toBlob(function(e){t(e)},e.format,e.quality)})}function G(t){if(this.elements.img.parentNode){Array.prototype.forEach.call(this.elements.img.classList,function(e){t.classList.add(e)});this.elements.img.parentNode.replaceChild(t,this.elements.img);this.elements.preview=t}this.elements.img=t}function d(p,d){var h=this,e,f=[],t=null,n=N.call(h);if(typeof p==="string"){e=p;p={}}else if(Array.isArray(p))f=p.slice();else if(typeof p==="undefined"&&h.data.url){_.call(h);L.call(h);return null}else{e=p.url;f=p.points||[];t=typeof p.zoom==="undefined"?null:p.zoom}h.data.bound=false;h.data.url=e||h.data.url;h.data.boundZoom=t;return R(e,n).then(function(e){G.call(h,e);if(!f.length){var t=m(e);var n=h.elements.viewport.getBoundingClientRect();var i=n.width/n.height;var r=t.width/t.height;var o,a;if(r>i){a=t.height;o=a*i}else{o=t.width;a=t.height/i}var s=(t.width-o)/2;var l=(t.height-a)/2;var u=s+o;var c=l+a;h.data.points=[s,l,u,c]}else if(h.options.relative)f=[f[0]*e.naturalWidth/100,f[1]*e.naturalHeight/100,f[2]*e.naturalWidth/100,f[3]*e.naturalHeight/100];h.data.orientation=p.orientation||1;h.data.points=f.map(function(e){return parseFloat(e)});if(h.options.useCanvas)W.call(h,h.data.orientation);_.call(h);L.call(h);d&&d()})}function U(e,t){return parseFloat(e).toFixed(t||0)}function O(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),i=n.left-t.left,r=n.top-t.top,o=(n.width-e.elements.viewport.offsetWidth)/2,a=(n.height-e.elements.viewport.offsetHeight)/2,s=i+e.elements.viewport.offsetWidth+o,l=r+e.elements.viewport.offsetHeight+a,u=e._currentZoom;if(u===Infinity||isNaN(u))u=1;var c=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;i=Math.max(c,i/u);r=Math.max(c,r/u);s=Math.max(c,s/u);l=Math.max(c,l/u);return{points:[U(i),U(r),U(s),U(l)],zoom:u,orientation:e.data.orientation}}var J={type:"canvas",format:"png",quality:1},ee=["jpeg","webp","png"];function te(e){var t=this,n=O.call(t),i=h(f(J),f(e)),r=typeof e==="string"?e:i.type||"base64",o=i.size||"viewport",a=i.format,s=i.quality,l=i.backgroundColor,u=typeof i.circle==="boolean"?i.circle:t.options.viewport.type==="circle",c=t.elements.viewport.getBoundingClientRect(),p=c.width/c.height,d;if(o==="viewport"){n.outputWidth=c.width;n.outputHeight=c.height}else if(typeof o==="object")if(o.width&&o.height){n.outputWidth=o.width;n.outputHeight=o.height}else if(o.width){n.outputWidth=o.width;n.outputHeight=o.width/p}else if(o.height){n.outputWidth=o.height*p;n.outputHeight=o.height}if(ee.indexOf(a)>-1){n.format="image/"+a;n.quality=s}n.circle=u;n.url=t.data.url;n.backgroundColor=l;d=new Promise(function(e){switch(r.toLowerCase()){case"rawcanvas":e(V.call(t,n));break;case"canvas":case"base64":e(K.call(t,n));break;case"blob":Q.call(t,n).then(e);break;default:e(q.call(t,n));break}});return d}function ne(){_.call(this)}function ie(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t=this,n=t.elements.canvas;t.data.orientation=s(t.data.orientation,e);c(n,t.elements.img,t.data.orientation);P.call(t,true);M.call(t);if(Math.abs(e)/90%2===1){var i=t._originalImageHeight;var r=t._originalImageWidth;t._originalImageWidth=i;t._originalImageHeight=r}}function re(){var e=this;e.element.removeChild(e.elements.boundary);n(e.element,"croppie-container");if(e.options.enableZoom)e.element.removeChild(e.elements.zoomerWrap);delete e.elements}if(typeof window!=="undefined"&&window.jQuery){var z=window.jQuery;z.fn.croppie=function(n){var e=typeof n;if(e==="string"){var i=Array.prototype.slice.call(arguments,1);var t=z(this).data("croppie");if(n==="get")return t.get();else if(n==="result")return t.result.apply(t,i);else if(n==="bind")return t.bind.apply(t,i);return this.each(function(){var e=z(this).data("croppie");if(!e)return;var t=e[n];if(z.isFunction(t)){t.apply(e,i);if(n==="destroy")z(this).removeData("croppie")}else throw"Croppie "+n+" method not found"})}else return this.each(function(){var e=new D(this,n);e.$=z;z(this).data("croppie",e)})}}function D(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");this.element=e;this.options=h(f(D.defaults),t);if(this.element.tagName.toLowerCase()==="img"){var n=this.element;x(n,"cr-original-image");u(n,{"aria-hidden":"true",alt:""});var i=document.createElement("div");this.element.parentNode.appendChild(i);i.appendChild(n);this.element=i;this.options.url=this.options.url||n.src}j.call(this);if(this.options.url){var r={url:this.options.url,points:this.options.points};delete this.options["url"];delete this.options["points"];d.call(this,r)}}return D.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:true,leftClass:"",rightClass:""},resizeControls:{width:true,height:true},customClass:"",showZoomer:true,enableZoom:true,enableResize:false,mouseWheelZoom:true,enableExif:false,enforceBoundary:true,enableOrientation:false,enableKeyMovement:true,update:function(){}},D.globals={translate:"translate3d"},h(D.prototype,{bind:function(e,t){return d.call(this,e,t)},get:function(){var e=O.call(this);var t=e.points;if(this.options.relative){t[0]/=this.elements.img.naturalWidth/100;t[1]/=this.elements.img.naturalHeight/100;t[2]/=this.elements.img.naturalWidth/100;t[3]/=this.elements.img.naturalHeight/100}return e},result:function(e){return te.call(this,e)},refresh:function(){return ne.call(this)},setZoom:function(e){k.call(this,e);b(this.elements.zoomer)},rotate:function(e){ie.call(this,e)},destroy:function(){return re.call(this)}}),D})?n.call(e,t,e,oe):n)&&(oe.exports=t)}},i={};function j(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},n[e].call(t.exports,t,t.exports,j)),t.exports}!function(){"use strict";var ue,ce,e;j(99);function i(e){return"object"==typeof e&&"function"==typeof e.to}function pe(e){e.parentElement.removeChild(e)}function de(e){return null!=e}function he(e){e.preventDefault()}function r(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function fe(e,t,n){0<n&&(ge(e,t),setTimeout(function(){we(e,t)},n))}function me(e){return Math.max(Math.min(e,100),0)}function ve(e){return Array.isArray(e)?e:[e]}function t(e){e=(e=String(e)).split(".");return 1<e.length?e[1].length:0}function ge(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function we(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function be(e){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:(n?e.documentElement:e.body).scrollLeft,y:t?window.pageYOffset:(n?e.documentElement:e.body).scrollTop}}function a(e,t){return 100/(t-e)}function s(e,t,n){return 100*t/(e[n+1]-e[n])}function l(e,t){for(var n=1;e>=t[n];)n+=1;return n}function n(e,t,n){var i,r,o;return n>=e.slice(-1)[0]?100:(o=l(n,e),i=e[o-1],e=e[o],r=t[o-1],t=t[o],r+(o=n,s(n=[i,e],n[0]<0?o+Math.abs(n[0]):o-n[0],0)/a(r,t)))}function o(e,t,n,i){var r,o,a;return 100===i?i:(o=e[(r=l(i,e))-1],a=e[r],n?(a-o)/2<i-o?a:o:t[r-1]?e[r-1]+(n=i-e[r-1],a=t[r-1],Math.round(n/a)*a):i)}(e=ue=ue||{}).Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values",(e=ce=ce||{})[e.None=-1]="None",e[e.NoValue=0]="NoValue",e[e.LargeValue=1]="LargeValue",e[e.SmallValue=2]="SmallValue";c.prototype.getDistance=function(e){for(var t=[],n=0;n<this.xNumSteps.length-1;n++)t[n]=s(this.xVal,e,n);return t},c.prototype.getAbsoluteDistance=function(e,t,n){var i=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[i+1];)i++;else e===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);n||e!==this.xPct[i+1]||i++;for(var r,o=1,a=(t=null===t?[]:t)[i],s=0,l=0,u=0,c=n?(e-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-e)/(this.xPct[i+1]-this.xPct[i]);0<a;)r=this.xPct[i+1+u]-this.xPct[i+u],100<t[i+u]*o+100-100*c?(s=r*c,o=(a-100*c)/t[i+u],c=1):(s=t[i+u]*r/100*o,o=0),n?(l-=s,1<=this.xPct.length+u&&u--):(l+=s,1<=this.xPct.length-u&&u++),a=t[i+u]*o;return e+l},c.prototype.toStepping=function(e){return e=n(this.xVal,this.xPct,e)},c.prototype.fromStepping=function(e){return t=this.xVal,n=this.xPct,100<=(e=e)?t.slice(-1)[0]:(o=l(e,n),i=t[o-1],t=t[o],r=n[o-1],n=n[o],(e-r)*a(r,n)*((o=[i,t])[1]-o[0])/100+o[0]);var t,n,i,r,o},c.prototype.getStep=function(e){return e=o(this.xPct,this.xSteps,this.snap,e)},c.prototype.getDefaultStep=function(e,t,n){var i=l(e,this.xPct);return(100===e||t&&e===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},c.prototype.getNearbySteps=function(e){e=l(e,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},c.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(t);return Math.max.apply(null,e)},c.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},c.prototype.convert=function(e){return this.getStep(this.toStepping(e))},c.prototype.handleEntryPoint=function(e,t){e="min"===e?0:"max"===e?100:parseFloat(e);if(!r(e)||!r(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(e),this.xVal.push(t[0]);t=Number(t[1]);e?this.xSteps.push(!isNaN(t)&&t):isNaN(t)||(this.xSteps[0]=t),this.xHighestCompleteStep.push(0)},c.prototype.handleStepPoint=function(e,t){t&&(this.xVal[e]===this.xVal[e+1]?this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e]:(this.xSteps[e]=s([this.xVal[e],this.xVal[e+1]],t,0)/a(this.xPct[e],this.xPct[e+1]),t=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],t=Math.ceil(Number(t.toFixed(3))-1),t=this.xVal[e]+this.xNumSteps[e]*t,this.xHighestCompleteStep[e]=t))};var u=c;function c(t,e,n){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e;var i,r=[];for(Object.keys(t).forEach(function(e){r.push([ve(t[e]),e])}),r.sort(function(e,t){return e[0][0]-t[0][0]}),i=0;i<r.length;i++)this.handleEntryPoint(r[i][1],r[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}var p={to:function(e){return void 0===e?"":e.toFixed(2)},from:Number},d={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},ye={tooltips:".__tooltips",aria:".__aria"};function h(e,t){if(!r(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function f(e,t){if(!r(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function m(e,t){if(!r(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function v(e,t){if(!r(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function g(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new u(t,e.snap||!1,e.singleStep)}function w(e,t){if(t=ve(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function b(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function y(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function E(e,t){if("number"!=typeof t)throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function C(e,t){var n,i=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(n=1;n<e.handles;n++)i.push(t);i.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=t}e.connect=i}function N(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function x(e,t){if(!r(t))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==t&&(e.margin=e.spectrum.getDistance(t))}function k(e,t){if(!r(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function P(e,t){var n;if(!r(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&2!==t.length&&!r(t[0])&&!r(t[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==t){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],n=0;n<e.spectrum.xNumSteps.length-1;n++)if(e.padding[0][n]<0||e.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var t=t[0]+t[1],i=e.spectrum.xVal[0];if(1<t/(e.spectrum.xVal[e.spectrum.xVal.length-1]-i))throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function A(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function L(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=t.indexOf("tap"),i=0<=t.indexOf("drag"),r=0<=t.indexOf("fixed"),o=0<=t.indexOf("snap"),a=0<=t.indexOf("hover"),s=0<=t.indexOf("unconstrained"),l=0<=t.indexOf("drag-all"),t=0<=t.indexOf("smooth-steps");if(r){if(2!==e.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");x(e,e.start[1]-e.start[0])}if(s&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:n||o,drag:i,dragAll:l,smoothSteps:t,fixed:r,snap:o,hover:a,unconstrained:s}}function _(e,t){if(!1!==t)if(!0===t||i(t)){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(t)}else{if((t=ve(t)).length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(e){if("boolean"!=typeof e&&!i(e))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),e.tooltips=t}}function M(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function V(e,t){if(!i(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function U(e,t){if(!i(n=t)||"function"!=typeof n.from)throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");var n;e.format=t}function O(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function z(e,t){e.documentElement=t}function D(e,t){if("string"!=typeof t&&!1!==t)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function R(t,n){if("object"!=typeof n)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof t.cssPrefix?(t.cssClasses={},Object.keys(n).forEach(function(e){t.cssClasses[e]=t.cssPrefix+n[e]})):t.cssClasses=n}function xe(t){var n={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:p,format:p},i={step:{r:!1,t:h},keyboardPageMultiplier:{r:!1,t:f},keyboardMultiplier:{r:!1,t:m},keyboardDefaultStep:{r:!1,t:v},start:{r:!0,t:w},connect:{r:!0,t:C},direction:{r:!0,t:A},snap:{r:!1,t:b},animate:{r:!1,t:y},animationDuration:{r:!1,t:E},range:{r:!0,t:g},orientation:{r:!1,t:N},margin:{r:!1,t:x},limit:{r:!1,t:k},padding:{r:!1,t:P},behaviour:{r:!0,t:L},ariaFormat:{r:!1,t:V},format:{r:!1,t:U},tooltips:{r:!1,t:_},keyboardSupport:{r:!0,t:O},documentElement:{r:!1,t:z},cssPrefix:{r:!0,t:D},cssClasses:{r:!0,t:R},handleAttributes:{r:!1,t:M}},r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:d,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10},e=(t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach(function(e){if(de(t[e])||void 0!==r[e])i[e].t(n,(de(t[e])?t:r)[e]);else if(i[e].r)throw new Error("noUiSlider: '"+e+"' is required.")}),n.pips=t.pips,document.createElement("div")),o=void 0!==e.style.msTransform,e=void 0!==e.style.transform;n.transformRule=e?"transform":o?"msTransform":"webkitTransform";return n.style=[["left","top"],["right","bottom"]][n.dir][n.ort],n}function F(e,d,o){var r,l,s,i,a,u=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},D=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),c=e,b=d.spectrum,p=[],h=[],f=[],m=0,v={},g=e.ownerDocument,w=d.documentElement||g.documentElement,y=g.body,R="rtl"===g.dir||1===d.ort?0:100;function x(e,t){var n=g.createElement("div");return t&&ge(n,t),e.appendChild(n),n}function F(e,c){var t,e=x(e,d.cssClasses.origin),n=x(e,d.cssClasses.handle);return x(n,d.cssClasses.touchArea),n.setAttribute("data-handle",String(c)),d.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",function(e){var t=c;if(!T()&&!S(t)){var n,i=["Left","Right"],r=["Down","Up"],o=["PageDown","PageUp"],a=["Home","End"],s=(d.dir&&!d.ort?i.reverse():d.ort&&!d.dir&&(r.reverse(),o.reverse()),e.key.replace("Arrow","")),l=s===o[0],o=s===o[1],u=s===r[0]||s===i[0]||l,r=s===r[1]||s===i[1]||o,i=s===a[0],s=s===a[1];if(!(u||r||i||s))return!0;if(e.preventDefault(),r||u){a=u?0:1,i=oe(t)[a];if(null===i)return!1;!1===i&&(i=b.getDefaultStep(h[t],u,d.keyboardDefaultStep)),i*=o||l?d.keyboardPageMultiplier:d.keyboardMultiplier,i=Math.max(i,1e-7),i*=u?-1:1,n=p[t]+i}else n=s?d.spectrum.xVal[d.spectrum.xVal.length-1]:d.spectrum.xVal[0];M(t,b.toStepping(n),!0,!0),L("slide",t),L("update",t),L("change",t),L("set",t)}return!1})),void 0!==d.handleAttributes&&(t=d.handleAttributes[c],Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])})),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",d.ort?"vertical":"horizontal"),0===c?ge(n,d.cssClasses.handleLower):c===d.handles-1&&ge(n,d.cssClasses.handleUpper),e.handle=n,e}function j(e,t){return!!t&&x(e,d.cssClasses.connect)}function H(e,t){return!(!d.tooltips||!d.tooltips[t])&&x(e.firstChild,d.cssClasses.tooltip)}function T(){return c.hasAttribute("disabled")}function S(e){return l[e].hasAttribute("disabled")}function E(){a&&(n("update"+ye.tooltips),a.forEach(function(e){e&&pe(e)}),a=null)}function $(){E(),a=l.map(H),t("update"+ye.tooltips,function(e,t,n){a&&d.tooltips&&!1!==a[t]&&(e=e[t],!0!==d.tooltips[t]&&(e=d.tooltips[t].to(n[t])),a[t].innerHTML=e)})}function B(e,t){return e.map(function(e){return b.fromStepping(t?b.getStep(e):e)})}function I(h){var f=function(e){if(e.mode===ue.Range||e.mode===ue.Steps)return b.xVal;if(e.mode!==ue.Count)return e.mode===ue.Positions?B(e.values,e.stepped):e.mode===ue.Values?e.stepped?e.values.map(function(e){return b.fromStepping(b.getStep(b.toStepping(e)))}):e.values:[];if(e.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var t=e.values-1,n=100/t,i=[];t--;)i[t]=t*n;return i.push(100),B(i,e.stepped)}(h),m={},e=b.xVal[0],t=b.xVal[b.xVal.length-1],v=!1,g=!1,w=0;return(f=f.slice().sort(function(e,t){return e-t}).filter(function(e){return!this[e]&&(this[e]=!0)},{}))[0]!==e&&(f.unshift(e),v=!0),f[f.length-1]!==t&&(f.push(t),g=!0),f.forEach(function(e,t){var n,i,r,o,a,s,l,u,c=f[t+1],p=h.mode===ue.Steps,d=(d=p?b.xNumSteps[t]:d)||c-e;for(void 0===c&&(c=e),d=Math.max(d,1e-7),n=e;n<=c;n=Number((n+d).toFixed(7))){for(s=(a=(r=b.toStepping(n))-w)/(h.density||1),u=a/(l=Math.round(s)),i=1;i<=l;i+=1)m[(o=w+i*u).toFixed(5)]=[b.fromStepping(o),0];a=-1<f.indexOf(n)?ce.LargeValue:p?ce.SmallValue:ce.NoValue,!t&&v&&n!==c&&(a=0),n===c&&g||(m[r.toFixed(5)]=[n,a]),w=r}}),m}function Z(r,o,a){var e,s=g.createElement("div"),i=((e={})[ce.None]="",e[ce.NoValue]=d.cssClasses.valueNormal,e[ce.LargeValue]=d.cssClasses.valueLarge,e[ce.SmallValue]=d.cssClasses.valueSub,e),l=((e={})[ce.None]="",e[ce.NoValue]=d.cssClasses.markerNormal,e[ce.LargeValue]=d.cssClasses.markerLarge,e[ce.SmallValue]=d.cssClasses.markerSub,e),u=[d.cssClasses.valueHorizontal,d.cssClasses.valueVertical],c=[d.cssClasses.markerHorizontal,d.cssClasses.markerVertical];function p(e,t){var n=t===d.cssClasses.value;return t+" "+(n?u:c)[d.ort]+" "+(n?i:l)[e]}return ge(s,d.cssClasses.pips),ge(s,0===d.ort?d.cssClasses.pipsHorizontal:d.cssClasses.pipsVertical),Object.keys(r).forEach(function(e){var t,n,i;n=r[t=e][0],e=r[e][1],(e=o?o(n,e):e)!==ce.None&&((i=x(s,!1)).className=p(e,d.cssClasses.marker),i.style[d.style]=t+"%",e>ce.NoValue)&&((i=x(s,!1)).className=p(e,d.cssClasses.value),i.setAttribute("data-value",String(n)),i.style[d.style]=t+"%",i.innerHTML=String(a.to(n)))}),s}function C(){i&&(pe(i),i=null)}function N(e){C();var t=I(e),n=e.filter,e=e.format||{to:function(e){return String(Math.round(e))}};return i=c.appendChild(Z(t,n,e))}function X(){var e=r.getBoundingClientRect(),t="offset"+["Width","Height"][d.ort];return 0===d.ort?e.width||r[t]:e.height||r[t]}function k(i,r,o,a){function t(e){var t,n;return!!(e=function(t,e,n){var i=0===t.type.indexOf("touch"),r=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),a=0,s=0;0===t.type.indexOf("MSPointer")&&(o=!0);if("mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(i){i=function(e){e=e.target;return e===n||n.contains(e)||t.composed&&t.composedPath().shift()===n};if("touchstart"===t.type){var l=Array.prototype.filter.call(t.touches,i);if(1<l.length)return!1;a=l[0].pageX,s=l[0].pageY}else{l=Array.prototype.find.call(t.changedTouches,i);if(!l)return!1;a=l.pageX,s=l.pageY}}e=e||be(g),(r||o)&&(a=t.clientX+e.x,s=t.clientY+e.y);return t.pageOffset=e,t.points=[a,s],t.cursor=r||o,t}(e,a.pageOffset,a.target||r))&&!(T()&&!a.doNotReject||(t=c,n=d.cssClasses.tap,(t.classList?t.classList.contains(n):new RegExp("\\b"+n+"\\b").test(t.className))&&!a.doNotReject)||i===u.start&&void 0!==e.buttons&&1<e.buttons||a.hover&&e.buttons)&&(D||e.preventDefault(),e.calcPoint=e.points[d.ort],void o(e,a))}var n=[];return i.split(" ").forEach(function(e){r.addEventListener(e,t,!!D&&{passive:!0}),n.push([e,t])}),n}function Y(e){var t,n,i=me(100*(e-(e=r,i=d.ort,t=e.getBoundingClientRect(),n=(e=e.ownerDocument).documentElement,e=be(e),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(e.x=0),i?t.top+e.y-n.clientTop:t.left+e.x-n.clientLeft))/X());return d.dir?100-i:i}function W(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&P(e,t)}function q(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return P(e,t);e=(d.dir?-1:1)*(e.calcPoint-t.startCalcPoint);J(0<e,100*e/t.baseSize,t.locations,t.handleNumbers,t.connect)}function P(e,t){t.handle&&(we(t.handle,d.cssClasses.active),--m),t.listeners.forEach(function(e){w.removeEventListener(e[0],e[1])}),0===m&&(we(c,d.cssClasses.drag),te(),e.cursor)&&(y.style.cursor="",y.removeEventListener("selectstart",he)),d.events.smoothSteps&&(t.handleNumbers.forEach(function(e){M(e,h[e],!0,!0,!1,!1)}),t.handleNumbers.forEach(function(e){L("update",e)})),t.handleNumbers.forEach(function(e){L("change",e),L("set",e),L("end",e)})}function A(e,t){var n,i,r,o;t.handleNumbers.some(S)||(1===t.handleNumbers.length&&(o=l[t.handleNumbers[0]].children[0],m+=1,ge(o,d.cssClasses.active)),e.stopPropagation(),i=k(u.move,w,q,{target:e.target,handle:o,connect:t.connect,listeners:n=[],startCalcPoint:e.calcPoint,baseSize:X(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:h.slice()}),r=k(u.end,w,P,{target:e.target,handle:o,listeners:n,doNotReject:!0,handleNumbers:t.handleNumbers}),o=k("mouseout",w,W,{target:e.target,handle:o,listeners:n,doNotReject:!0,handleNumbers:t.handleNumbers}),n.push.apply(n,i.concat(r,o)),e.cursor&&(y.style.cursor=getComputedStyle(e.target).cursor,1<l.length&&ge(c,d.cssClasses.drag),y.addEventListener("selectstart",he,!1)),t.handleNumbers.forEach(function(e){L("start",e)}))}function K(e){e.stopPropagation();var r,o,a,t=Y(e.calcPoint),n=(r=t,a=!(o=100),l.forEach(function(e,t){var n,i;!S(t)&&(n=h[t],(i=Math.abs(n-r))<o||i<=o&&n<r||100===i&&100===o)&&(a=t,o=i)}),a);!1!==n&&(d.events.snap||fe(c,d.cssClasses.tap,d.animationDuration),M(n,t,!0,!0),te(),L("slide",n,!0),L("update",n,!0),d.events.snap?A(e,{handleNumbers:[n]}):(L("change",n,!0),L("set",n,!0)))}function Q(e){var e=Y(e.calcPoint),e=b.getStep(e),t=b.fromStepping(e);Object.keys(v).forEach(function(e){"hover"===e.split(".")[0]&&v[e].forEach(function(e){e.call(z,t)})})}function t(e,t){v[e]=v[e]||[],v[e].push(t),"update"===e.split(".")[0]&&l.forEach(function(e,t){L("update",t)})}function n(e){var i=e&&e.split(".")[0],r=i?e.substring(i.length):e;Object.keys(v).forEach(function(e){var t=e.split(".")[0],n=e.substring(t.length);i&&i!==t||r&&r!==n||((t=n)!==ye.aria&&t!==ye.tooltips||r===n)&&delete v[e]})}function L(n,i,r){Object.keys(v).forEach(function(e){var t=e.split(".")[0];n===t&&v[e].forEach(function(e){e.call(z,p.map(d.format.to),i,p.slice(),r||!1,h.slice(),z)})})}function _(e,t,n,i,r,o,a){var s;return 1<l.length&&!d.events.unconstrained&&(i&&0<t&&(s=b.getAbsoluteDistance(e[t-1],d.margin,!1),n=Math.max(n,s)),r)&&t<l.length-1&&(s=b.getAbsoluteDistance(e[t+1],d.margin,!0),n=Math.min(n,s)),1<l.length&&d.limit&&(i&&0<t&&(s=b.getAbsoluteDistance(e[t-1],d.limit,!1),n=Math.min(n,s)),r)&&t<l.length-1&&(s=b.getAbsoluteDistance(e[t+1],d.limit,!0),n=Math.max(n,s)),d.padding&&(0===t&&(s=b.getAbsoluteDistance(0,d.padding[0],!1),n=Math.max(n,s)),t===l.length-1)&&(s=b.getAbsoluteDistance(100,d.padding[1],!0),n=Math.min(n,s)),!((n=me(n=a?n:b.getStep(n)))===e[t]&&!o)&&n}function G(e,t){var n=d.ort;return(n?t:e)+", "+(n?e:t)}function J(e,n,i,t,r){var o=i.slice(),a=t[0],s=d.events.smoothSteps,l=[!e,e],u=[e,!e],c=(t=t.slice(),e&&t.reverse(),1<t.length?t.forEach(function(e,t){t=_(o,e,o[e]+n,l[t],u[t],!1,s);!1===t?n=0:(n=t-o[e],o[e]=t)}):l=u=[!0],!1);t.forEach(function(e,t){c=M(e,i[e]+n,l[t],u[t],!1,s)||c}),c&&(t.forEach(function(e){L("update",e),L("slide",e)}),null!=r)&&L("drag",a)}function ee(e,t){return d.dir?100-e-t:e}function te(){f.forEach(function(e){var t=50<h[e]?-1:1,t=3+(l.length+t*e);l[e].style.zIndex=String(t)})}function M(e,t,n,i,r,o){return!1!==(t=r?t:_(h,e,t,n,i,!1,o))&&(r=t,h[n=e]=r,p[n]=b.fromStepping(r),r="translate("+G(ee(r,0)-R+"%","0")+")",l[n].style[d.transformRule]=r,ne(n),ne(n+1),!0)}function ne(e){var t,n;s[e]&&(n=100,t="translate("+G(ee(t=(t=0)!==e?h[e-1]:t,n=(n=e!==s.length-1?h[e]:n)-t)+"%","0")+")",n="scale("+G(n/100,"1")+")",s[e].style[d.transformRule]=t+" "+n)}function ie(e,t){return null===e||!1===e||void 0===e||("number"==typeof e&&(e=String(e)),!1===(e=!1!==(e=d.format.from(e))?b.toStepping(e):e))||isNaN(e)?h[t]:e}function V(e,t,n){var i,r=ve(e),e=void 0===h[0],o=(t=void 0===t||t,d.animate&&!e&&fe(c,d.cssClasses.tap,d.animationDuration),f.forEach(function(e){M(e,ie(r[e],e),!0,!1,n)}),1===f.length?0:1);for(e&&b.hasNoSize()&&(n=!0,h[0]=0,1<f.length)&&(i=100/(f.length-1),f.forEach(function(e){h[e]=e*i}));o<f.length;++o)f.forEach(function(e){M(e,h[e],!0,!0,n)});te(),f.forEach(function(e){L("update",e),null!==r[e]&&t&&L("set",e)})}function re(e){return(e=void 0!==e&&e)?1===p.length?p[0]:p.slice(0):1===(e=p.map(d.format.to)).length?e[0]:e}function oe(e){var t=h[e],n=b.getNearbySteps(t),e=p[e],i=n.thisStep.step,r=null;if(d.snap)return[e-n.stepBefore.startValue||null,n.stepAfter.startValue-e||null];!1!==i&&e+i>n.stepAfter.startValue&&(i=n.stepAfter.startValue-e),r=e>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&e-n.stepBefore.highestStep,100===t?i=null:0===t&&(r=null);e=b.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(e))),[r=null!==r&&!1!==r?Number(r.toFixed(e)):r,i]}ge(e=c,d.cssClasses.target),0===d.dir?ge(e,d.cssClasses.ltr):ge(e,d.cssClasses.rtl),0===d.ort?ge(e,d.cssClasses.horizontal):ge(e,d.cssClasses.vertical),ge(e,"rtl"===getComputedStyle(e).direction?d.cssClasses.textDirectionRtl:d.cssClasses.textDirectionLtr),r=x(e,d.cssClasses.base);var U,ae=d.connect,se=r,le=x(se,d.cssClasses.connects);l=[],(s=[]).push(j(le,ae[0]));for(var O=0;O<d.handles;O++)l.push(F(se,O)),f[O]=O,s.push(j(le,ae[O+1]));(U=d.events).fixed||l.forEach(function(e,t){k(u.start,e.children[0],A,{handleNumbers:[t]})}),U.tap&&k(u.start,r,K,{}),U.hover&&k(u.move,r,Q,{hover:!0}),U.drag&&s.forEach(function(t,e){var n,i,r,o,a;!1!==t&&0!==e&&e!==s.length-1&&(n=l[e-1],i=l[e],r=[t],o=[n,i],a=[e-1,e],ge(t,d.cssClasses.draggable),U.fixed&&(r.push(n.children[0]),r.push(i.children[0])),U.dragAll&&(o=l,a=f),r.forEach(function(e){k(u.start,e,A,{handles:o,handleNumbers:a,connect:t})}))}),V(d.start),d.pips&&N(d.pips),d.tooltips&&$(),n("update"+ye.aria),t("update"+ye.aria,function(e,t,o,n,a){f.forEach(function(e){var t=l[e],n=_(h,e,0,!0,!0,!0),i=_(h,e,100,!0,!0,!0),r=a[e],e=String(d.ariaFormat.to(o[e])),n=b.fromStepping(n).toFixed(1),i=b.fromStepping(i).toFixed(1),r=b.fromStepping(r).toFixed(1);t.children[0].setAttribute("aria-valuemin",n),t.children[0].setAttribute("aria-valuemax",i),t.children[0].setAttribute("aria-valuenow",r),t.children[0].setAttribute("aria-valuetext",e)})});var z={destroy:function(){for(n(ye.aria),n(ye.tooltips),Object.keys(d.cssClasses).forEach(function(e){we(c,d.cssClasses[e])});c.firstChild;)c.removeChild(c.firstChild);delete c.noUiSlider},steps:function(){return f.map(oe)},on:t,off:n,get:re,set:V,setHandle:function(e,t,n,i){if(!(0<=(e=Number(e))&&e<f.length))throw new Error("noUiSlider: invalid handle number, got: "+e);M(e,ie(t,e),!0,!0,i),L("update",e),n&&L("set",e)},reset:function(e){V(d.start,e)},disable:function(e){null!=e?(l[e].setAttribute("disabled",""),l[e].handle.removeAttribute("tabindex")):(c.setAttribute("disabled",""),l.forEach(function(e){e.handle.removeAttribute("tabindex")}))},enable:function(e){null!=e?(l[e].removeAttribute("disabled"),l[e].handle.setAttribute("tabindex","0")):(c.removeAttribute("disabled"),l.forEach(function(e){e.removeAttribute("disabled"),e.handle.setAttribute("tabindex","0")}))},__moveHandles:function(e,t,n){J(e,t,h,n)},options:o,updateOptions:function(t,e){var n=re(),i=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"],r=(i.forEach(function(e){void 0!==t[e]&&(o[e]=t[e])}),xe(o));i.forEach(function(e){void 0!==t[e]&&(d[e]=r[e])}),b=r.spectrum,d.margin=r.margin,d.limit=r.limit,d.padding=r.padding,d.pips?N(d.pips):C(),(d.tooltips?$:E)(),h=[],V(de(t.start)?t.start:n,e)},target:c,removePips:C,removeTooltips:E,getPositions:function(){return h.slice()},getTooltips:function(){return a},getOrigins:function(){return l},pips:N};return z}var S={__spectrum:u,cssClasses:d,create:function(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");return t=F(e,xe(t),t),e.noUiSlider=t}};$(function(){let u=$("#jsUserPhoto"),c=u.children("img"),p=u.children(".text-muted"),d=$("#jsUploadUserPhotoRules"),h=$("<div>",{class:"alert alert-danger"}),f=u.children(".btn"),m=u.children('[type="file"]'),v=$("<div>",{class:"profile__user-photo-add btn d-flex flex-column justify-content-center align-items-center",append:$("<div>",{class:"spinner-border mb-1"}).add("<div>",{class:"mt-1",text:" "})}),g=u.children(".csrf");f.on("click",function(e){e.preventDefault(),m.click()}),m.change(function(e){var n,t=$(this).get(0).files;if(!(t.length<=0)){let l=t[0].name;FileReader&&t&&t.length&&((n=new FileReader).onload=function(e){let r=$("<img>",{src:n.result,class:"mr-1 mb-1"}),t=$("<button>",{type:"button",class:"btn btn-primary",text:""}),o=$("<div>",{height:230,class:"mb-2"}),a=$("<div>",{width:230,class:"mr-2"}),s=$("<div>",{class:"modal fade",id:"profilePhotoCrop",tabindex:-1,role:"dialog","aria-hidden":"false",append:$("<div>",{class:"modal-dialog modal-dialog-centered",role:"document",append:$("<div>",{class:"modal-content",append:$("<div>",{class:"modal-header",append:$("<h5>",{class:"modal-title",text:" "}).add($("<button>",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",append:$("<span>",{"aria-hidden":"true",html:"&times;"})}))}).add($("<div>",{class:"modal-body",append:$("<div>",{class:"d-flex justify-content-center align-items-center",append:r}).add($("<div>",{class:"d-flex justify-content-center align-items-center photo-crop__rotate",append:$("<i>",{"data-feather":"rotate-ccw",class:"feather-18 d-block mr-2"}).add(a).add("<i>",{"data-feather":"rotate-cw",class:"feather-18 d-block"})}))})).add($("<div>",{class:"modal-footer",append:$("<button>",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",text:""}).add(t)}))})})});$("body").append(s),feather.replace(),s.on("shown.bs.modal",function(e){r.croppie({enableOrientation:!0,enableExif:!0,viewport:{width:150,height:200,type:"square"},boundary:{width:300,height:300},customClass:"photo__crop",showZoomer:!1}),$(".photo__crop").after($("<div>",{class:"d-flex flex-column justify-content-center align-items-center photo-crop__zoom",append:$("<i>",{"data-feather":"zoom-in",class:"feather-18 mb-2"}).add(o).add("<i>",{"data-feather":"zoom-out",class:"feather-18"})})),S.create(a[0],{range:{min:-180,max:180},start:0,step:90}),feather.replace();let n=!1,i=0;$(".photo__crop").on("update.croppie",function(e,t){S.create(o[0],{range:{min:parseFloat($(".photo__crop").find(".cr-slider").attr("min")),max:parseFloat($(".photo__crop").find(".cr-slider").attr("max"))},direction:"rtl",start:0,orientation:"vertical"}),$(".photo__crop").off("update.croppie"),n||o[0].noUiSlider.set(t.zoom),o[0].noUiSlider.on("slide",function(e,t){r.croppie("setZoom",parseFloat(e[0]))}),o[0].noUiSlider.on("start",function(e,t){n=!0}),o[0].noUiSlider.on("end",function(e,t){n=!1}),$(".photo__crop").on("update.croppie",function(e,t){n||o[0].noUiSlider.set(t.zoom)})}),a[0].noUiSlider.on("slide",function(e,t){r.croppie("rotate",i-parseFloat(e[0])),i=parseFloat(e[0])});t.on("click",function(){r.croppie("result",{format:"jpeg",circle:!1,type:"blob",size:"original"}).then(function(e){h.remove(),f.remove(),c.remove(),v.appendTo(u),p.appendTo(u),d.appendTo(u);var t=new FormData;t.append("file",e,l.split(".").slice(0,-1).join(".")+".jpg"),t.append(g.data("name"),g.data("value")),$.ajax({url:"/upload/default/user-photo",data:t,processData:!1,contentType:!1,type:"POST",success:function(e){v.remove(),$("<div>",{class:"profile__user-photo-add w-100 m-0 d-flex flex-column justify-content-center align-items-center",append:$("<i>",{"data-feather":"check-circle"}).add("<div>",{class:"mt-1",text:" "})}).appendTo(u),p.remove(),d.appendTo(u),feather.replace()},error:function(e,t){v.remove();let n="";if(4==e.readyState){var i,r=JSON.parse(e.responseText);for(i in r.errors)n+=r.errors[i].join("<br>");f.appendTo(u)}else n=(e.readyState,e.statusText);h.html(n),0<c.length&&c.appendTo(u),f.appendTo(u),p.appendTo(u),d.appendTo(u),h.appendTo(u),feather.replace(),f.on("click",function(e){e.preventDefault(),m.click()})}}),s.modal("hide")})})}),s.on("hidden.bs.modal",function(e){s.remove()}),s.modal("show")},n.readAsDataURL(t[0]))}})})}()}();
//# sourceMappingURL=upload_user_photo.js.map